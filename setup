#!/bin/bash

DIR='/home/moonbase/.dotfiles'

touch /home/moonbase/.profile
touch /home/moonbase/.bashrc

echo "source /home/moonbase/.dotfiles/.profile" >> /home/moonbase/.profile
echo "source /home/moonbase/.profile" >> /home/moonbase/.bashrc

# ===== Version Managers

curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.36.0/install.sh | bash

# ===== Sources

sources=(.tmux.conf);

# sources

for i in "${sources[@]}"; do
  if [ -e /home/moonbase/.$i ]
  then
    echo "error file .$i exists";
  else
    echo "writing $i";
    echo "source ${DIR}/$i" >> /home/moonbase/$i;
  fi
done

# symlinks
declare -A symlinks

symlinks['alacritty.yml']='/home/moonbase/.config/alacritty'
symlinks['nvim/init.vim']='/home/moonbase/.config'

echo $(/bin/bash --version)
for symlink in "${!symlinks[@]}"; do
  if [ -e /home/moonbase/.$symlink ]
  then
    echo "error file .$symlink exists";
  else
    echo "symlinking ${symlinks[$symlink]}/$symlink";
    echo "creating directory $(dirname "${symlinks[$symlink]}/$symlink")"
    mkdir -p $(dirname "${symlinks[$symlink]}/$symlink")
    ln -s ${DIR}/$symlink ${symlinks[$symlink]}/$symlink;
  fi
done

ls -lart /home/moonbase
echo $(dirname /home/moonbase)
